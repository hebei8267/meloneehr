<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- namespace必须指向Dao接口 -->
<mapper namespace="com.tjhx.daobw.DailySaleMyBatisDao">
	<!-- mybatis表结构与对象的映射关系 -->
	<resultMap id="Result_Map_CheckInOut" type="com.tjhx.entity.bw.DailySale">
        <result column="oper_date" property="operDate" jdbcType="VARCHAR"/>
        <result column="branch_no" property="orgBranchNo" jdbcType="VARCHAR"/>
        <result column="bw_sale_amt" property="bwSaleAmt" jdbcType="NUMERIC"/>
	</resultMap>
	
  	
  	<!-- 取得checkinout信息 -->
	<select id="getDailySaleList" parameterType="String" resultMap="Result_Map_CheckInOut">
		SELECT
    		oper_date,
    		branch_no,
    		SUM(pos_amt - pos_ret_amt + so_amt - ri_amt) AS bw_sale_amt
		FROM
    		view_sale_daysum_item a
		WHERE
     		oper_date = #{oper_date}
		GROUP BY
    		branch_no,
    		oper_date
	</select>
</mapper>
