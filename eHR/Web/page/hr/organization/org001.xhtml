<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:rich="http://richfaces.org/rich" 
	xmlns:a4j="http://richfaces.org/a4j"
	template="/page/core/template/default_template.xhtml">
	
	<ui:param name="pageName" value="组织结构信息"/>
	<ui:param name="pageNum" value="ORGANIZATION 001"/>
	
	<ui:define name="body">
		<script src="${request.contextPath}/js/json2.js" type="text/javascript"/>
		<script src="${request.contextPath}/page/hr/organization/org001.js" type="text/javascript"/>
		
		<h:messages styleClass="message"/>
		
		<table>
			<tr>
				<td colspan="3">
					<input type="button" class="submitBtn" value="添 加" onclick="openAddOrgWindow()"/>
					<input type="button" class="deleteBtn" value="删 除" onclick="delInfoCheck()"/>
				</td>
			</tr>
			<tr/>
			<tr>
				<td valign="top">
					<div id="treeTitleDiv" class="x-panel-header">
						<span class="x-panel-header-text">组织结构信息树</span>
					</div>
					<div id="organizationInfoTreeDiv" style="border:1px solid #99bbe8;margin-top:-1px;">
						<rich:tree id="organizationInfoTree" switchType="client"
							value="#{Org001_View.orgTreeData}" var="item">
							<rich:treeNode icon="/images/nativeplace.gif" iconLeaf="/images/nativeplace.gif">
								<h:outputLabel id="node" value="#{item.name}" 
									onclick="setFromData('#{item.id}')" 
									styleClass="treeNode"/>
							</rich:treeNode>
						</rich:tree>
					</div>
				</td>
				<td width="30px"></td>
				<td valign="top">
					<h:form id="organizationCfgForm">
						<table>
							<tr>
								<td>
									<table>
										<tr>
											<td>
											组织详细信息
											</td>
										</tr>
									</table>
								</td>
							</tr>
							<tr>
								<td>
									<table>
										<tr>	
											<td colspan="5">
												<h:outputLabel value="相同级别组织的[名称]不能和现有数据重复" styleClass="tipText"/>
											</td>
										</tr>
										<tr/>
										<tr/>
										<tr/>
										<tr>
											<td width="60">隶属于</td>
											<td align="right">
												<h:inputText id="pname" styleClass="readonly" readonly="true"/>
												<h:inputHidden id="pid" value="#{Org001_View.pid}"/>
											</td>
											<td width="5"/>
											<td width="60">编号</td>
											<td align="right">
												<h:inputText id="rid" styleClass="readonly" readonly="true"/>
												<h:inputHidden id="id" value="#{Org001_View.id}"/>
											</td>
										</tr>
										<tr>
											<td>名称</td>
											<td>
												<h:inputText id="name" value="#{Org001_View.name}" styleClass="inputText required max-length-20" />
											</td>
											<td/>
											<td>简称</td>
											<td>
												<h:inputText id="shortName" value="#{Org001_View.shortName}" styleClass="inputText required max-length-20" />
											</td>
										</tr>
										<tr>
											<td>设立时间</td>
											<td>
												<h:inputText id="startDate" value="#{Org001_View.startDate}" styleClass="inputText required max-length-20" />
											</td>
											<td/>
											<td>组织类型</td>
											<td>
											</td>
										</tr>
										<tr>
											<td valign="top">组织描述</td>
											<td valign="top">
												<h:inputTextarea id="description" value="#{Org001_View.description}" styleClass="inputTextarea max-length-255"/>
											</td>
										</tr>									
										<tr>
											<td>所在地</td>
											<td>
											</td>
											<td/>
											<td>地址</td>
											<td>
												<h:inputText id="address" value="#{Org001_View.address}" styleClass="inputText required max-length-20" />
											</td>
										</tr>
										<tr>
											<td>电话号码</td>
											<td>
												<h:inputText id="telephone" value="#{Org001_View.telephone}" styleClass="inputText required max-length-20" />
											</td>
											<td/>
											<td>传真号码</td>
											<td>
												<h:inputText id="fax" value="#{Org001_View.fax}" styleClass="inputText required max-length-20" />
											</td>
										</tr>
										<tr>
											<td valign="top">撤销时间</td>
											<td valign="top">
												<h:inputText id="endDate" value="#{Org001_View.endDate}" styleClass="inputText required max-length-20" />
											</td>
											<td/>
											<td valign="top">撤销原因</td>
											<td valign="top">
												<h:inputTextarea id="endDescription" value="#{Org001_View.endDescription}" styleClass="inputTextarea max-length-255"/>
											</td>
										</tr>
										<tr height="60"></tr>
										<tr>
											<td align="right" colspan="5">
												<h:commandButton value="更 新" action="#{Org001_View.updateOrganizationInfo_Action}" 
													onclick="return updateInfoCheck()" styleClass="submitBtn"/>
												<input type="button" class="cleanBtn" value="复 原" onclick="resetFromData()"/>
											</td>
										</tr>
									</table>
								</td>
							</tr>
						</table>
						<div class="hidden">
							<h:inputHidden id="jsonNodeData" value="#{Org001_View.jsonNodeData}"/>
							<h:commandButton id="delOrganizationInfoBtn" value="删 除" action="#{DDCom003_View.delOrganizationInfo_Action}" />
						</div>
					</h:form>
				</td>
			</tr>
		</table>
		
		<rich:modalPanel id="addOrganizationInfoView" height="260" width="240" zindex="1000" resizeable="false" left="100" top="100">
			<f:facet name="header">
				<p>添加组织信息</p>
			</f:facet>
			<f:facet name="controls">
				<h:graphicImage value="/images/close.gif" style="cursor:pointer" onclick="Richfaces.hideModalPanel('addOrganizationInfoView')"/>
			</f:facet>
			<a4j:include viewId="/page/hr/organization/org001_01.xhtml" id="addOrganizationInfoWindow"/>
		</rich:modalPanel>
	</ui:define>
</ui:composition>